(()=>{"use strict";var t={208:(t,e,n)=>{n.d(e,{A:()=>i});var s=n(601),o=n.n(s),r=n(314),a=n.n(r)()(o());a.push([t.id,'*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n:root {\n  --c-focused: #08c;\n  --task-indentation: 16px;\n}\n\nbody {\n  font-family: system-ui, sans-serif;\n  font-size: 1rem;\n  margin: 0 16px;\n  line-height: 1.5;\n}\n\nbutton,\ninput[type="text"] {\n  font-size: inherit;\n  font-family: inherit;\n}\n\nbutton {\n  color: #000;\n  background-color: #fff;\n  border: 1px solid #fff;\n  border-radius: 5px;\n}\n\nbutton:hover {\n  border: 1px solid #000;\n}\n\nbutton:active {\n  color: #fff;\n  fill: #fff;\n  background-color: #000;\n}\n\ninput[type="text"] {\n  appearance: none;\n  outline: none;\n  border: 1px solid #000;\n  border-radius: 5px;\n  padding: 5px;\n}\n\ninput[type="text"]:focus {\n  border-color: var(--c-focused);\n}\n\ninput[type="text"]:disabled {\n  opacity: 0.33;\n}\n\n.task input[type="text"] {\n  width: 350px;\n}\n\ndialog input[type="text"] {\n  width: 80px;\n}\n\n.new-task {\n  display: grid;\n  place-items: center;\n}\n\n.task {\n  margin: 10px 0;\n}\n\n.new-task-form {\n  display: inline-grid;\n  grid-template-columns: repeat(3, auto);\n  justify-contents: left;\n  place-items: center;\n  gap: 8px;\n}\n\n.new-task-form > * {\n  display: grid;\n  place-items: center;\n}\n\n.task-header {\n  display: inline-flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.task-buttons {\n  display: inline-flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.task-buttons > * {\n  display: grid;\n  place-items: center;\n}\n\n.task-title.done {\n  text-decoration: line-through;\n}\n\n.low-priority {\n  color: #008899;\n}\n\n.high-priority {\n  color: #d00000;\n}\n\n.project {\n  font-weight: 800;\n}\n\ndialog {\n  border: none;\n  border-radius: 8px;\n}\n\nform > div {\n  margin: 16px 0;\n}\n\ninput[type="date"] {\n  font-family: inherit;\n  font-size: inherit;\n  appearance: none;\n  border: 1px solid #000;\n}\n\n.x-container {\n  display: grid;\n  grid-template-columns: 1fr;\n  justify-items: end;\n}\n\nform > div:last-child {\n  display: grid;\n  grid-template-columns: 1fr;\n  justify-items: end;\n}\n\n.task-description {\n  outline: none;\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  width: 50ch;\n  height: 200px;\n  padding: 4px;\n  margin: 8px 0;\n  border: 1px solid #000;\n  resize: none;\n  overflow-wrap: break-word;\n  overflow-y: scroll;\n}\n\n.task-description:focus {\n  border-color: var(--c-focused);\n}\n',""]);const i=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",s=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),s&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),s&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,s,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(s)for(var i=0;i<this.length;i++){var d=this[i][0];null!=d&&(a[d]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);s&&a[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,s=0;s<e.length;s++)if(e[s].identifier===t){n=s;break}return n}function s(t,s){for(var r={},a=[],i=0;i<t.length;i++){var d=t[i],c=s.base?d[0]+s.base:d[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var p=n(u),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var f=o(h,s);s.byIndex=i,e.splice(i,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=s(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var i=n(r[a]);e[i].references--}for(var d=s(t,o),c=0;c<r.length;c++){var l=n(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=d}}},659:t=>{var e={};t.exports=function(t,n){var s=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,o&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={id:s,exports:{}};return t[s](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var s=n(72),o=n.n(s),r=n(825),a=n.n(r),i=n(659),d=n.n(i),c=n(56),l=n.n(c),u=n(540),p=n.n(u),h=n(113),f=n.n(h),m=n(208),g={};g.styleTagTransform=f(),g.setAttributes=l(),g.insert=d().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p(),o()(m.A,g),m.A&&m.A.locals&&m.A.locals;var y="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",v="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z";const k=(()=>{const t=document.querySelector("body"),e=function(t,e,n){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox",`0 0 ${e} ${e}`),s.setAttribute("height",`${e}px`),s.setAttribute("width",`${e}px`);const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",t),n&&(o.classList.add(n),s.classList.add(n)),s.appendChild(o),s},n=(t,n,s)=>{const o=document.createElement("button");o.className=t;const r=e(n,s,t);return o.appendChild(r),o},s=(t,e)=>{let n=t.target.parentNode;do{n=n.parentNode}while(!n.classList.contains(e));return n},o=t=>{const n=t?"task-fold-arrow":"task-unfold-arrow",s=t?"M7,10L12,15L17,10H7Z":"M10,17L15,12L10,7V17Z",o=document.createElement("span");o.className=n;const r=e(s,18,n);return o.appendChild(r),o},r=(t,e)=>{switch(b.getPriority(t)){case 0:e.classList.add("low-priority"),e.classList.remove("high-priority");break;case 1:e.classList.remove("high-priority"),e.classList.remove("low-priority");break;case 2:e.classList.add("high-priority"),e.classList.remove("low-priority")}},a=(t,e)=>{b.isProject(t)?e.classList.add("project"):e.classList.remove("project")},i=t=>{const e=t.getAttribute("data-id"),s=t.querySelector(".task-contents"),o=s.querySelector(".nested"),r=document.createElement("div");r.className="task-description",r.innerHTML=b.getDescription(e).replaceAll("\n","<br>"),s.insertBefore(r,o);const a=document.createElement("div");a.className="task-description-buttons",s.insertBefore(a,o);const i=n("task-edit-description",v,24);a.appendChild(i)},d=t=>{const e=document.createElement("span");e.className="task-header";const n=o(!1);e.appendChild(n);const s=document.createElement("span");s.className="task-title",s.textContent=b.getTitle(t),r(t,s),a(t,s),b.isTaskDone(t)&&s.classList.add("done"),e.appendChild(s);const i=document.createElement("span");i.className="scheduled",i.textContent=b.getDate(t)??"",e.appendChild(i);const d=h();return e.appendChild(d),e},c=t=>{const e=document.createElement("div");e.className="task",e.setAttribute("data-id",t);const n=d(t);return e.appendChild(n),e},l=(t,e)=>{for(const n of e){const e=c(n);t.appendChild(e)}},u=t=>{const e=document.createElement("div");e.classList.add("task"),t.appendChild(e);const s=document.createElement("span");s.classList.add("new-task-form"),e.appendChild(s);const o=document.createElement("input");o.type="text",s.appendChild(o);const r=n("new-task-ok","M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",24);s.appendChild(r);const a=n("new-task-cancel","M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",24);s.appendChild(a)},p=()=>{const e=t.querySelector("#tasks");u(e)},h=()=>{const t=document.createElement("span");t.className="task-buttons";const e=n("task-done",y,24);t.appendChild(e);const s=n("task-prioritise","M14,19H22V17H14V19M14,13.5H22V11.5H14V13.5M14,8H22V6H14V8M2,12.5C2,8.92 4.92,6 8.5,6H9V4L12,7L9,10V8H8.5C6,8 4,10 4,12.5C4,15 6,17 8.5,17H12V19H8.5C4.92,19 2,16.08 2,12.5Z",24);t.appendChild(s);const o=n("task-schedule","M15,13H16.5V15.82L18.94,17.23L18.19,18.53L15,16.69V13M19,8H5V19H9.67C9.24,18.09 9,17.07 9,16A7,7 0 0,1 16,9C17.07,9 18.09,9.24 19,9.67V8M5,21C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H6V1H8V3H16V1H18V3H19A2,2 0 0,1 21,5V11.1C22.24,12.36 23,14.09 23,16A7,7 0 0,1 16,23C14.09,23 12.36,22.24 11.1,21H5M16,11.15A4.85,4.85 0 0,0 11.15,16C11.15,18.68 13.32,20.85 16,20.85A4.85,4.85 0 0,0 20.85,16C20.85,13.32 18.68,11.15 16,11.15Z",24);t.appendChild(o);const r=n("task-edit-title",v,24);t.appendChild(r);const a=n("task-delete","M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",24);return t.appendChild(a),t},f=t=>{const e=s(t,"task"),n=e.querySelector(".new-task-form"),o=e.parentNode.parentNode.parentNode,r=o.getAttribute("data-id");let i;i=o.classList.contains("task")?b.getNestedLvl(r)+1:0;const c=n.querySelector("input"),l=b.addTask(c.value,i);if(e.setAttribute("data-id",l),i>0){b.addNested(r,l);const t=o.querySelector(".task-title");a(r,t)}n.remove();const u=d(l);e.appendChild(u)},m=t=>{s(t,"task").remove()},g=t=>{const e=s(t,"task"),n=e.querySelector(".task-title"),o=e.getAttribute("data-id");b.toggleTodo(o),b.isTaskDone(o)?n.classList.add("done"):n.classList.remove("done")},k=t=>{const e=s(t,"task"),n=e.getAttribute("data-id"),o=e.parentNode.parentNode.parentNode,r=o.getAttribute("data-id");if(o.classList.contains("task")){b.deleteNested(r,n);const t=o.querySelector(".task-title");a(r,t)}b.deleteTask(n),e.remove()},L=e=>{const n=t.querySelector("#schedule-menu"),o=s(e,"task");n.setAttribute("data-id",o.getAttribute("data-id")),n.showModal()},x=t=>{const e=s(t,"task-header"),o=e.parentNode.getAttribute("data-id"),r=e.querySelector(".task-title");if(!r)return;r.remove();const a=e.querySelector(".scheduled"),i=document.createElement("input");i.type="text",i.value=b.getTitle(o),e.insertBefore(i,a);const d=n("ok-title-change",y,24);e.insertBefore(d,a)},C=t=>{const e=s(t,"task"),n=e.querySelector(".task-header"),o=e.getAttribute("data-id"),r=n.querySelector(".scheduled"),a=n.querySelector('input[type="text"]');b.setTitle(o,a.value),a.remove(),n.querySelector(".ok-title-change").remove();const i=document.createElement("span");i.className="task-title",i.textContent=b.getTitle(o),n.insertBefore(i,r)},w=t=>{const e=s(t,"task"),r=e.getAttribute("data-id"),a=e.querySelector(".task-header"),d=a.querySelector(".task-title");a.querySelector(".task-unfold-arrow").remove();const c=o(!0);a.insertBefore(c,d);const u=document.createElement("div");u.className="task-contents",u.style.marginLeft=(t=>{const e=t.getAttribute("data-id"),n=b.getNestedLvl(e)+1,s=getComputedStyle(document.body).getPropertyValue("--task-indentation");return Number(s.slice(0,-2))*n+"px"})(e),e.appendChild(u);const p=document.createElement("div");p.className="nested",l(p,b.getNestedArr(r)),u.appendChild(p),i(e);const h=n("add-nested-task","M2 12C2 9.2 3.6 6.8 6 5.7V3.5C2.5 4.8 0 8.1 0 12S2.5 19.2 6 20.5V18.3C3.6 17.2 2 14.8 2 12M15 3C10 3 6 7 6 12S10 21 15 21 24 17 24 12 20 3 15 3M20 13H16V17H14V13H10V11H14V7H16V11H20V13Z",24);u.appendChild(h)},S=t=>{const e=s(t,"task"),n=e.querySelector(".task-header"),r=n.querySelector(".task-title");n.querySelector(".task-fold-arrow").remove();const a=o(!1);n.insertBefore(a,r),e.querySelector(".task-contents").remove()},A=t=>{const e=s(t,"task"),o=e.getAttribute("data-id"),r=e.querySelector(".task-contents"),a=r.querySelector(".nested");r.querySelector(".task-description").remove(),r.querySelector(".task-description-buttons").remove();const i=document.createElement("textarea");i.className="task-description",i.textContent=b.getDescription(o),r.insertBefore(i,a);const d=document.createElement("div");d.className="task-description-buttons",r.insertBefore(d,a);const c=n("task-apply-description",y,24);d.appendChild(c)},N=t=>{const e=s(t,"task"),n=e.getAttribute("data-id"),o=e.querySelector(".task-contents"),r=o.querySelector("textarea");b.setDescription(n,r.value),r.remove(),o.querySelector(".task-description-buttons").remove(),i(e)},q=t=>{const e=s(t,"task").querySelector(".nested");u(e)},H=e=>{const n=t.querySelector("#priority-selection"),o=s(e,"task");n.setAttribute("data-id",o.getAttribute("data-id")),n.showModal()};t.addEventListener("click",(function(e){switch(e.target.id){case"set-schedule":return void(e=>{e.preventDefault();const n=e.target.parentNode.parentNode,s=n.parentNode,o=s.getAttribute("data-id"),r=t.querySelector(`div[data-id="${o}"] .scheduled`);n.reportValidity()&&(b.setDate(o,n.elements.date.value),n.elements.hour.disabled||b.setHour(o,n.elements.hour.value),n.reset(),s.close(),s.querySelector("#hour").setAttribute("disabled",""),r.textContent=b.getDate(o))})(e);case"close-schedule-form":return void(t=>{const e=s(t,"schedule-menu");e.querySelector("form").reset(),e.close(),e.querySelector("#hour").setAttribute("disabled","")})(e);case"set-priority":return void(e=>{e.preventDefault();const n=t.querySelector("#priority-selection"),s=n.querySelector("form"),o=n.getAttribute("data-id"),a=+s.elements.priority.value;b.setPriority(o,a);const i=t.querySelector(`div[data-id="${o}"] span.task-title`);r(o,i),s.reset(),n.close()})(e);case"close-priority-form":return void(()=>{const e=t.querySelector("#priority-selection");e.querySelector("form").reset(),e.close()})()}const n={"new-task":p,"new-task-ok":f,"new-task-cancel":m,"task-done":g,"task-delete":k,"task-schedule":L,"task-edit-title":x,"ok-title-change":C,"task-unfold-arrow":w,"task-fold-arrow":S,"task-edit-description":A,"task-apply-description":N,"add-nested-task":q,"task-prioritise":H};for(const t in n)if(e.target.classList.contains(t))return void n[t](e)})),t.querySelector("#set-hour").addEventListener("change",(e=>{const n=t.querySelector("#hour");e.target.checked?n.removeAttribute("disabled"):n.setAttribute("disabled","")}));const V=n("new-task","M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",24);return t.appendChild(V),{body:t,showNestedTasks:l}})();class b{static storage={todos:[],topLvl:[]};static addTask(t,e){const n=new L(t,e),s=this.storage.todos.push(n)-1;return 0===e&&this.storage.topLvl.push(s),s}static deleteTask(t){if(0===this.storage.todos[t].nestedLvl){const e=this.storage.topLvl.indexOf(t);this.storage.topLvl.splice(e,1)}if(this.storage.todos[t].nested.length>0)for(const e of this.storage.todos[t].nested)this.deleteTask(e);this.storage.todos[t]=null}static toggleTodo(t){this.storage.todos[t].toggleDone()}static isTaskDone(t){return this.storage.todos[t].done}static setDate(t,e){this.storage.todos[t].dueDate=new Date(e)}static setHour(t,e){let[n,s]=e.split(":");n=+n,s=+s,this.storage.todos[t].dueDate.setHours(n,s)}static getDate(t){const e=this.storage.todos[t].dueDate;if(e)return e.toLocaleString()}static setTitle(t,e){this.storage.todos[t].title=e}static getTitle(t){return this.storage.todos[t].title}static getDescription(t){return this.storage.todos[t].description}static setDescription(t,e){this.storage.todos[t].description=e}static getNestedLvl(t){return this.storage.todos[t].nestedLvl}static getNestedArr(t){return this.storage.todos[t].nested}static addNested(t,e){this.storage.todos[t].nested.push(e)}static deleteNested(t,e){const n=this.storage.todos[t].nested.indexOf(e);this.storage.todos[t].nested.splice(n,1)}static setPriority(t,e){this.storage.todos[t].priority=e}static getPriority(t){return this.storage.todos[t].priority}static isProject(t){return this.storage.todos[t].isProject()}}class L{constructor(t,e){this.title=t,this.description="",this.dueDate=null,this.done=!1,this.nestedLvl=e,this.nested=[],this.priority=1}isProject(){return this.nested.length>0}toggleDone(){this.done=!this.done}}function x(){const t=JSON.stringify(b.storage);localStorage.setItem("data",t)}window.addEventListener("visibilitychange",x),window.addEventListener("storage",x),window.addEventListener("load",(function(){const t=localStorage.getItem("data");if(!t)return;const e=JSON.parse(t);e.todos=e.todos.map((t=>{const e=Object.assign(Object.create(L.prototype),t);return e.dueDate&&(e.dueDate=new Date(e.dueDate)),e})),b.storage=e;const n=k.body.querySelector("#tasks");k.showNestedTasks(n,b.storage.topLvl)}))})();